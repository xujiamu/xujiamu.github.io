(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dd8bfb9"],{"0a3b":function(t,e,n){"use strict";var a=n("6ecd"),r=n.n(a);r.a},"2b00":function(t,e,n){"use strict";var a=n("5b23"),r=n.n(a);r.a},"40dc":function(t,e,n){"use strict";var a=n("69fc"),r=n.n(a);r.a},"456d":function(t,e,n){var a=n("4bf8"),r=n("0d58");n("5eda")("keys",(function(){return function(t){return r(a(t))}}))},"5b23":function(t,e,n){},"5eda":function(t,e,n){var a=n("5ca1"),r=n("8378"),i=n("79e5");t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],c={};c[t]=e(n),a(a.S+a.F*i((function(){n(1)})),"Object",c)}},"69fc":function(t,e,n){},"6ecd":function(t,e,n){},"6f89":function(t,e,n){},7123:function(t,e,n){"use strict";var a=n("e549"),r=n.n(a);r.a},"8e6e":function(t,e,n){var a=n("5ca1"),r=n("990b"),i=n("6821"),c=n("11e9"),o=n("f1ae");a(a.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,a=i(t),s=c.f,u=r(a),l={},f=0;while(u.length>f)n=s(a,e=u[f++]),void 0!==n&&o(l,e,n);return l}})},"990b":function(t,e,n){var a=n("9093"),r=n("2621"),i=n("cb7c"),c=n("7726").Reflect;t.exports=c&&c.ownKeys||function(t){var e=a.f(i(t)),n=r.f;return n?e.concat(n(t)):e}},"9a37":function(t,e,n){"use strict";var a=n("6f89"),r=n.n(a);r.a},"9bd0":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-control"},t._l(t.title,(function(e,a){return n("div",{staticClass:"tab-control-item",on:{click:function(e){return t.changeIndex(a)}}},[n("span",{class:{active:t.currentIndex===a}},[t._v(t._s(e))])])})),0)},r=[],i={name:"TabControl",data:function(){return{currentIndex:0}},props:{title:Array},methods:{changeIndex:function(t){this.currentIndex=t,this.$emit("ChangeIndex",t)}}},c=i,o=(n("2b00"),n("2877")),s=Object(o["a"])(c,a,r,!1,null,"36d8d490",null);e["a"]=s.exports},ac6a:function(t,e,n){for(var a=n("cadf"),r=n("0d58"),i=n("2aba"),c=n("7726"),o=n("32e9"),s=n("84f2"),u=n("2b4c"),l=u("iterator"),f=u("toStringTag"),g=s.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},b=r(d),y=0;y<b.length;y++){var h,p=b[y],m=d[p],v=c[p],_=v&&v.prototype;if(_&&(_[l]||o(_,l,g),_[f]||o(_,f,p),s[p]=g,m))for(h in a)_[h]||i(_,h,a[h],!0)}},bb51:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"category"}},[n("nav-bar",{staticClass:"nav-bar"},[n("div",{attrs:{slot:"center"},slot:"center"},[t._v("商品分类")])]),n("div",{staticClass:"content"},[n("tab-menu",{attrs:{categories:t.categories},on:{selectItem:t.selectItem}}),n("scroll",{ref:"scroll",attrs:{id:"tab-content",data:[t.categoryData]}},[n("div",[n("tab-content-category",{attrs:{subcategories:t.showSubcategory}}),n("tab-control",{attrs:{title:["综合","新品","销量"]},on:{ChangeIndex:t.tabClick}}),n("tab-content-detail",{attrs:{"category-detail":t.showCategoryDetail}})],1)])],1)],1)},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),c=n("a7ac"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.categories.length?n("scroll",{attrs:{id:"tab-menu"}},[n("div",{staticClass:"menu-list"},t._l(t.categories,(function(e,a){return n("div",{key:a,staticClass:"menu-list-item",class:{active:a===t.currentIndex},on:{click:function(e){return t.itemClick(a)}}},[t._v("\n      "+t._s(e.title)+"\n    ")])})),0)]):t._e()},s=[],u=n("5d17"),l={name:"TabMenu",components:{Scroll:u["a"]},props:{categories:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("selectItem",t)}}},f=l,g=(n("7123"),n("2877")),d=Object(g["a"])(f,o,s,!1,null,"68fee542",null),b=d.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return Object.keys(t.subcategories).length?n("div",[t.subcategories.list?n("grid-view",{attrs:{cols:3,lineSpace:15,"v-margin":20}},t._l(t.subcategories.list,(function(e,a){return n("div",{key:a,staticClass:"item"},[n("a",{attrs:{href:e.link}},[n("img",{staticClass:"item-img",attrs:{src:e.image,alt:""}}),n("div",{staticClass:"item-text"},[t._v(t._s(e.title))])])])})),0):t._e()],1):t._e()},h=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"gridView",staticClass:"grid-view"},[t._t("default")],2)},m=[],v=(n("c5f6"),{name:"GridView",props:{cols:{type:Number,default:2},hMargin:{type:Number,default:8},vMargin:{type:Number,default:8},itemSpace:{type:Number,default:8},lineSpace:{type:Number,default:8}},mounted:function(){setTimeout(this._autoLayout,20)},updated:function(){this._autoLayout()},methods:{_autoLayout:function(){var t=this.$refs.gridView,e=t.children;t.style.padding="".concat(this.vMargin,"px ").concat(this.hMargin,"px");for(var n=(t.clientWidth-2*this.hMargin-(this.cols-1)*this.itemSpace)/this.cols,a=0;a<e.length;a++){var r=e[a];r.style.width=n+"px",(a+1)%this.cols!==0&&(r.style.marginRight=this.itemSpace+"px"),a>=this.cols&&(r.style.marginTop=this.lineSpace+"px")}}}}),_=v,C=(n("9a37"),Object(g["a"])(_,p,m,!1,null,"58a324f6",null)),S=C.exports,x={name:"TabContentCategory",components:{GridView:S},props:{subcategories:{type:Object,default:function(){return{}}}}},D=x,O=(n("0a3b"),Object(g["a"])(D,y,h,!1,null,"24dbe9ec",null)),L=O.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.categoryDetail.length?n("grid-view",t._l(t.categoryDetail,(function(t,e){return n("goods-list-item",{key:e,attrs:{item:t}})})),1):t._e()},j=[],T=n("9977"),I={name:"TabContentDetail",components:{GridView:S,GoodsListItem:T["a"]},props:{categoryDetail:{type:Array,default:function(){return[]}}}},k=I,M=Object(g["a"])(k,w,j,!1,null,"08a2d528",null),P=M.exports,V=n("9bd0"),$=n("1bab");function E(){return Object($["a"])({url:"/api/v1/category"})}function G(t){return Object($["a"])({url:"/api/v1/subcategory",params:{maitKey:t}})}function N(t,e){return Object($["a"])({url:"/api/v1/subcategory/detail",params:{miniWallkey:t,type:e}})}var A=n("b95e"),R=n("eecb");function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(n,!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K={name:"Category",components:{NavBar:c["a"],TabMenu:b,TabControl:V["a"],Scroll:u["a"],TabContentCategory:L,TabContentDetail:P},mixins:[R["c"]],data:function(){return{categories:[],categoryData:{},currentIndex:-1}},mounted:function(){var t=this;this._getCategory(),this.$bus.$on("imgLoad",(function(){t.$refs.scroll.refresh()}))},computed:{showSubcategory:function(){return-1===this.currentIndex?{}:this.categoryData[this.currentIndex].subcategories},showCategoryDetail:function(){return-1===this.currentIndex?[]:this.categoryData[this.currentIndex].categoryDetail[this.currentType]}},methods:{_getCategory:function(){var t=this;E().then((function(e){t.categories=e.data.category.list;for(var n=0;n<t.categories.length;n++)t.categoryData[n]={subcategories:{},categoryDetail:{pop:[],new:[],sell:[]}};t._getSubcategories(0)}))},_getSubcategories:function(t){var e=this;this.currentIndex=t;var n=this.categories[t].maitKey;G(n).then((function(n){e.categoryData[t].subcategories=n.data,e.categoryData=F({},e.categoryData),e._getCategoryDetail(A["b"]),e._getCategoryDetail(A["c"]),e._getCategoryDetail(A["a"])}))},_getCategoryDetail:function(t){var e=this,n=this.categories[this.currentIndex].miniWallkey;N(n,t).then((function(n){e.categoryData[e.currentIndex].categoryDetail[t]=n,e.categoryData=F({},e.categoryData)}))},selectItem:function(t){this._getSubcategories(t)}}},W=K,B=(n("40dc"),Object(g["a"])(W,a,r,!1,null,"70185e2f",null));e["default"]=B.exports},e549:function(t,e,n){},f1ae:function(t,e,n){"use strict";var a=n("86cc"),r=n("4630");t.exports=function(t,e,n){e in t?a.f(t,e,r(0,n)):t[e]=n}}}]);
//# sourceMappingURL=chunk-5dd8bfb9.fc93d4aa.js.map